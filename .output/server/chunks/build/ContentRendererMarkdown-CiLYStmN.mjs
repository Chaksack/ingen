import{defineComponent as t,computed as e,mergeProps as n,unref as r,h as o,getCurrentInstance as i,toRaw as a,reactive as u,watch as l,resolveComponent as d,defineAsyncComponent as s,Text as p,Comment as c,useSSRContext as m}from"vue";import{S as f,T as v,U as y}from"../nitro/nitro.mjs";import{find as g,html as b}from"property-information";import{f as h}from"./node-hwMnPqaI.mjs";import{ssrRenderComponent as j}from"vue/server-renderer";import{u as k}from"./preview-CyjoVtle.mjs";import"unist-util-visit";import"hast-util-to-string";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"consola";import"@unhead/schema-org/vue";import"node:url";import"unified";import"mdast-util-to-string";import"micromark";import"unist-util-stringify-position";import"micromark-util-character";import"micromark-util-chunked";import"micromark-util-resolve-all";import"micromark-util-sanitize-uri";import"slugify";import"remark-parse";import"remark-rehype";import"remark-mdc";import"remark-gfm";import"rehype-external-links";import"rehype-sort-attribute-values";import"rehype-sort-attributes";import"rehype-raw";import"detab";import"github-slugger";import"unhead/server";import"unhead/utils";import"unhead/plugins";import"vue-bundle-renderer/runtime";import"ipx";import"./server.mjs";import"vue-router";const x=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],_="default",S=/^@|^v-on:/,w=/^:|^v-bind:/,R=/^v-model/,C=["select","textarea","input"],O=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(t=>[t,`prose-${t}`])),D=t({name:"MDCRenderer",props:{body:{type:Object,required:!0},data:{type:Object,default:()=>({})},class:{type:[String,Object],default:void 0},tag:{type:[String,Boolean],default:void 0},prose:{type:Boolean,default:void 0},components:{type:Object,default:()=>({})},unwrap:{type:[Boolean,String],default:!1}},async setup(t){var n,r,o,d,s,p,c,m;const f=null==(o=null==(r=null==(n=i())?void 0:n.appContext)?void 0:r.app)?void 0:o.$nuxt,v=(null==f?void 0:f.$route)||(null==f?void 0:f._route),{mdc:y}=(null==(d=null==f?void 0:f.$config)?void 0:d.public)||{},g={...(null==(s=null==y?void 0:y.components)?void 0:s.prose)&&!1!==t.prose?O:{},...(null==(p=null==y?void 0:y.components)?void 0:p.map)||{},...a((null==(m=null==(c=t.data)?void 0:c.mdc)?void 0:m.components)||{}),...t.components},b=e(()=>{var e;const n=((null==(e=t.body)?void 0:e.children)||[]).map(t=>t.tag||t.type).filter(t=>!x.includes(t));return Array.from(new Set(n)).sort().join(".")}),h=u({...t.data});return l(()=>t.data,t=>{Object.assign(h,t)}),await async function(t,e){if(!t)return;const n=Array.from(new Set(loadComponents(t,e)));function loadComponents(t,e){const n=t.tag;if("text"===t.type||"binding"===n||"comment"===t.type)return[];const r=findMappedTag(t,e.tags),o=[];"root"===t.type||x.includes(r)||o.push(r);for(const n of t.children||[])o.push(...loadComponents(n,e));return o}await Promise.all(n.map(async t=>{if((null==t?void 0:t.render)||(null==t?void 0:t.ssrRender)||(null==t?void 0:t.__ssrInlineRender))return;const e=resolveVueComponent(t);(null==e?void 0:e.__asyncLoader)&&!e.__asyncResolved&&await e.__asyncLoader()}))}(t.body,{tags:g}),{tags:g,contentKey:b,route:v,runtimeData:h,updateRuntimeData:function(t,e){const n=t.split(".").length-1;return t.split(".").reduce((t,r,o)=>o==n&&t?(t[r]=e,t[r]):"object"==typeof t?t[r]:void 0,h)}}},render(t){var e,n;const{tags:r,tag:i,body:a,data:u,contentKey:l,route:d,unwrap:s,runtimeData:p,updateRuntimeData:c}=t;if(!a)return null;const m={...u,tags:r,$route:d,runtimeData:p,updateRuntimeData:c},f=!1!==i?resolveVueComponent(i||(null==(e=m.component)?void 0:e.name)||m.component||"div"):void 0;return f?o(f,{...null==(n=m.component)?void 0:n.props,class:t.class,...this.$attrs,key:l},{default:defaultSlotRenderer}):null==defaultSlotRenderer?void 0:defaultSlotRenderer();function defaultSlotRenderer(){return s?h(renderSlots(a,o,m,m).default(),"string"==typeof s?s.split(" "):["*"]):renderSlots(a,o,m,m).default()}}});function renderNode(t,e,n,r={}){if("text"===t.type)return e(p,t.value);if("comment"===t.type)return e(c,null,t.value);const o=t.tag,i=findMappedTag(t,n.tags);if("binding"===t.tag)return function(t,e,n,r={}){var o,i,a;const u={...n.runtimeData,...r,$document:n,$doc:n},l=/\.|\[(\d+)\]/,d=null==(i=t.props)?void 0:i.value.trim().split(l).filter(Boolean),s=d.reduce((t,e)=>{if(t&&e in t)return"function"==typeof t[e]?t[e]():t[e]},u),c=null==(a=t.props)?void 0:a.defaultValue;return e(p,null!=(o=null!=s?s:c)?o:"")}(t,e,n,r);const a=resolveVueComponent(i);"object"==typeof a&&(a.tag=o);const u=function(t,e){const{tag:n="",props:r={}}=t;return Object.keys(r).reduce(function(t,o){if("__ignoreMap"===o)return t;const i=r[o];if(R.test(o))return function(t,e,n,r,{native:o}){var i;const a=(null==(i=t.match(/^v-model:([^=]+)/))?void 0:i[1])||"modelValue",u=o?"onInput":`onUpdate:${a}`;return n[o?"value":a]=evalInContext(e,r.runtimeData),n[u]=t=>{var n;r.updateRuntimeData(e,o?null==(n=t.target)?void 0:n.value:t)},n}(o,i,t,e,{native:C.includes(n)});if("v-bind"===o)return function(t,e,n,r){const o=evalInContext(e,r);return n=Object.assign(n,o),n}(0,i,t,e);if(S.test(o))return function(t,e,n,r){return t=t.replace(S,""),n.on=n.on||{},n.on[t]=()=>evalInContext(e,r),n}(o,i,t,e);if(w.test(o))return function(t,e,n,r){return t=t.replace(w,""),n[t]=evalInContext(e,r),n}(o,i,t,e);const{attribute:a}=g(b,o);return Array.isArray(i)&&i.every(t=>"string"==typeof t)?(t[a]=i.join(" "),t):(t[a]=i,t)},{})}(t,n);return e(a,u,renderSlots(t,e,n,{...r,...u}))}function renderSlots(t,e,n,r){const o=(t.children||[]).reduce((t,e)=>{if(!function(t){return"template"===t.tag}(e))return t[_].push(e),t;const n=function(t){let e="";for(const n of Object.keys(t.props||{}))if(n.startsWith("#")||n.startsWith("v-slot:")){e=n.split(/[:#]/,2)[1];break}return e||_}(e);return t[n]=t[n]||[],"element"===e.type&&t[n].push(...e.children||[]),t},{[_]:[]}),i=Object.entries(o).reduce((t,[o,i])=>i.length?(t[o]=()=>function(t){const e=[];for(const n of t){const t=e[e.length-1];n.type===p&&(null==t?void 0:t.type)===p?t.children=t.children+n.children:e.push(n)}return e}(i.map(t=>renderNode(t,e,n,r))),t):t,{});return i}const resolveVueComponent=t=>{if("string"==typeof t){if(x.includes(t))return t;const e=d(f(t),!1);return t&&"AsyncComponentWrapper"!==(null==e?void 0:e.name)?"string"==typeof e?e:"setup"in e?s(()=>new Promise(t=>t(e))):e:e}return t};function evalInContext(t,e){const n=t.split(".").reduce((t,e)=>"object"==typeof t?t[e]:void 0,e);return void 0===n?y(t):n}function findMappedTag(t,e){var n;const r=t.tag;return r&&void 0===(null==(n=t.props)?void 0:n.__ignoreMap)&&(e[r]||e[f(r)]||e[v(t.tag)])||r}const M=D.setup;D.setup=(t,e)=>{const n=m();return(n.modules||(n.modules=new Set)).add("node_modules/@nuxtjs/mdc/dist/runtime/components/MDCRenderer.vue"),M?M(t,e):void 0};const I=t({__name:"ContentRendererMarkdown",__ssrInlineRender:!0,props:{value:{type:Object,required:!0},excerpt:{type:Boolean,default:!1},tag:{type:String,default:"div"},components:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})}},setup(t){const o=t,i=k().isEnabled(),a=e(()=>{let t=o.value.body||o.value;return o.excerpt&&o.value.excerpt&&(t=o.value.excerpt),t}),u=e(()=>{const{body:t,excerpt:e,...n}=o.value;return{...n,...o.data}}),l=e(()=>({...o.components,...u.value._components||{}}));return(e,o,d,s)=>{o(j(D,n({body:a.value,data:u.value,tag:t.tag,components:l.value,"data-content-id":r(i)?t.value._id:void 0},s),null,d))}}}),$=I.setup;I.setup=(t,e)=>{const n=m();return(n.modules||(n.modules=new Set)).add("node_modules/@nuxt/content/dist/runtime/components/ContentRendererMarkdown.vue"),$?$(t,e):void 0};export{I as default};
//# sourceMappingURL=ContentRendererMarkdown-CiLYStmN.mjs.map
